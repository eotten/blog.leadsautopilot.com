---
layout: default
---

<article class="container mx-auto px-4 py-12">
  <header class="mb-10 max-w-4xl mx-auto">
    {% if page.image %}
    <div class="mb-8 rounded-xl overflow-hidden shadow-lg">
      <img src="{{ page.image | relative_url }}" alt="{{ page.title }}" class="w-full h-64 md:h-80 object-cover">
    </div>
    {% endif %}
    
    <h1 id="article-title" class="text-3xl md:text-4xl font-bold text-gray-900 mb-6 leading-tight font-montserrat">{{ page.title }}</h1>
    
    <div class="flex flex-wrap items-center text-gray-600 text-sm md:text-base mb-6">
      <span class="mr-4">
        <time datetime="{{ page.date | date_to_xmlschema }}">{{ page.date | date: "%B %d, %Y" }}</time>
      </span>
      
      {% if page.author %}
      <span class="mr-4">
        <span class="text-gray-400 mr-1">by</span> {{ page.author }}
      </span>
      {% endif %}
      
      {% if page.categories.size > 0 %}
      <span>
        <span class="text-gray-400 mr-1">in</span>
        {% for category in page.categories %}
        <a href="/categories/{{ category | slugify }}" class="text-blue-600 hover:text-blue-800">{{ category }}</a>{% unless forloop.last %}, {% endunless %}
        {% endfor %}
      </span>
      {% endif %}
    </div>
  </header>

  <div class="flex flex-col lg:flex-row gap-8">
    <!-- Left Sidebar - Table of Contents -->
    <aside class="lg:w-1/5 order-2 lg:order-1">
      <div class="sticky top-24 bg-white p-4 rounded-lg shadow-sm">
        <h3 class="text-lg font-semibold text-gray-900 mb-4 pb-2 border-b border-gray-200 font-montserrat">Contents</h3>
        <nav id="table-of-contents" class="toc">
          <ul class="text-sm space-y-2 text-gray-700"></ul>
        </nav>
      </div>
    </aside>
    
    <!-- Main Content -->
    <div class="prose prose-blue lg:prose-lg mx-auto max-w-none article-content lg:w-3/5 order-1 lg:order-2">
      {{ content }}
      
      {% if page.tags.size > 0 %}
      <div class="mt-12 pt-6 border-t border-gray-200">
        <h3 class="text-lg font-medium text-gray-900 mb-4 font-montserrat">Tags:</h3>
        <div class="flex flex-wrap gap-2">
          {% for tag in page.tags %}
          <a href="/tags/{{ tag | slugify }}" class="px-3 py-1 bg-blue-100 text-blue-700 text-sm rounded-full hover:bg-blue-200 transition-colors">{{ tag }}</a>
          {% endfor %}
        </div>
      </div>
      {% endif %}
    </div>
    
    <!-- Right Sidebar - Email Signup & Related -->
    <aside class="lg:w-1/5 order-3">
      <div class="sticky top-24 space-y-8">
        <!-- Email Signup -->
        <div class="mb-8">
          {% include email-signup.html %}
        </div>
        
        <!-- Related Posts -->
        <div class="bg-white p-4 rounded-lg shadow-sm">
          <h3 class="text-lg font-semibold text-gray-900 mb-4 pb-2 border-b border-gray-200 font-montserrat">Related Posts</h3>
          <div class="space-y-4">
            {% assign maxRelated = 3 %}
            {% assign minCommonTags = 1 %}
            {% assign maxRelatedCounter = 0 %}
    
            {% for post in site.posts %}
              {% assign sameTagCount = 0 %}
              
              {% for tag in post.tags %}
                {% if post.url != page.url %}
                  {% if page.tags contains tag %}
                    {% assign sameTagCount = sameTagCount | plus: 1 %}
                  {% endif %}
                {% endif %}
              {% endfor %}
    
              {% if sameTagCount >= minCommonTags and maxRelatedCounter < maxRelated %}
                <div class="text-sm">
                  <a href="{{ post.url | relative_url }}" class="text-blue-600 hover:text-blue-800 font-medium">{{ post.title }}</a>
                  <p class="text-gray-500 text-xs mt-1">{{ post.date | date: "%B %d, %Y" }}</p>
                </div>
                {% assign maxRelatedCounter = maxRelatedCounter | plus: 1 %}
              {% endif %}
            {% endfor %}
    
            {% if maxRelatedCounter == 0 %}
              <p class="text-gray-500 text-sm">No related posts found.</p>
            {% endif %}
          </div>
        </div>
      </div>
    </aside>
  </div>
</article>

<style>
  /* Additional post styling */
  .prose p {
    margin-top: 1.5em;
    margin-bottom: 1.5em;
  }
  
  .prose h1, .prose h2, .prose h3 {
    font-family: 'Montserrat', sans-serif;
    font-weight: 700;
    color: #111827; /* Black instead of blue */
  }
  
  .prose h1 {
    font-size: 2.25em;
    margin-top: 1em;
    margin-bottom: 0.8em;
    line-height: 1.2;
    letter-spacing: -0.025em;
  }
  
  .prose h2 {
    margin-top: 2em;
    position: relative;
  }
  
  /* Fix for bullet points and numbered lists */
  .prose ul {
    list-style-type: disc;
    padding-left: 1.625em;
    margin-top: 1.25em;
    margin-bottom: 1.25em;
  }
  
  .prose ol {
    list-style-type: decimal;
    padding-left: 1.625em;
    margin-top: 1.25em;
    margin-bottom: 1.25em;
  }
  
  .prose ul li, .prose ol li {
    display: list-item;
    padding-left: 0.375em;
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
  
  .prose h2 .header-anchor,
  .prose h3 .header-anchor {
    position: absolute;
    left: -1em;
    opacity: 0;
    transition: opacity 0.2s;
    font-weight: normal;
    color: var(--primary-color);
  }
  
  .prose h2:hover .header-anchor,
  .prose h3:hover .header-anchor {
    opacity: 0.7;
  }
  
  .prose h2 .header-anchor:hover,
  .prose h3 .header-anchor:hover {
    opacity: 1;
  }
  
  .prose code {
    background-color: #f1f5f9;
    padding: 0.2em 0.4em;
    border-radius: 0.25em;
  }
  
  .prose a {
    text-decoration: none;
    border-bottom: 1px solid #1a56db;
    transition: border-color 0.2s ease;
  }
  
  .prose a:hover {
    border-bottom-width: 2px;
  }
  
  .prose blockquote {
    font-style: italic;
    border-left: 4px solid #1a56db;
    padding-left: 1em;
    margin-left: 0;
    color: #4a5568;
  }
  
  .font-montserrat {
    font-family: 'Montserrat', sans-serif;
  }
  
  /* Table of contents styles */
  .toc ul {
    list-style: none;
    padding-left: 0;
  }
  
  .toc li {
    margin-bottom: 0.5rem;
  }
  
  .toc a {
    color: #4a5568;
    text-decoration: none;
    display: block;
    padding: 0.25rem 0;
    transition: color 0.2s;
  }
  
  .toc a:hover {
    color: #1a56db;
  }
  
  .toc a.active {
    color: #1a56db;
    font-weight: 500;
  }
  
  .toc ul ul {
    padding-left: 1rem;
    margin-top: 0.25rem;
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Process all headings to add IDs and anchor links
    const articleContent = document.querySelector('.article-content');
    const headings = articleContent.querySelectorAll('h2, h3, h4');
    const toc = document.querySelector('#table-of-contents ul');
    
    if (headings.length === 0) {
      document.querySelector('#table-of-contents').parentElement.style.display = 'none';
      return;
    }
    
    headings.forEach(heading => {
      // Generate ID from heading text
      const id = heading.textContent.toLowerCase()
        .replace(/[^\w\s-]/g, '') // Remove special chars
        .replace(/\s+/g, '-') // Replace spaces with hyphens
        .replace(/-+/g, '-'); // Remove consecutive hyphens
      
      // Set the ID
      heading.id = id;
      
      // Create anchor link
      const anchor = document.createElement('a');
      anchor.classList.add('header-anchor');
      anchor.href = `#${id}`;
      anchor.textContent = '#';
      
      // Add the anchor to the heading
      heading.insertBefore(anchor, heading.firstChild);
      heading.classList.add('font-montserrat');
      
      // Add to table of contents
      const tocItem = document.createElement('li');
      const tocLink = document.createElement('a');
      tocLink.href = `#${id}`;
      tocLink.textContent = heading.textContent.replace('#', '').trim();
      tocItem.appendChild(tocLink);
      
      // Handle hierarchy - add sub-items for h3 under h2
      if (heading.tagName === 'H3') {
        const lastH2Item = toc.querySelector('li:last-child');
        let subList = lastH2Item.querySelector('ul');
        
        if (!subList) {
          subList = document.createElement('ul');
          subList.classList.add('mt-1', 'space-y-1');
          lastH2Item.appendChild(subList);
        }
        
        subList.appendChild(tocItem);
      } else {
        toc.appendChild(tocItem);
      }
    });
    
    // Highlight the current section in TOC when scrolling
    const tocLinks = document.querySelectorAll('.toc a');
    
    function highlightTocSection() {
      const scrollPosition = window.scrollY + 100;
      
      // Find the current section
      let currentSection = null;
      headings.forEach(heading => {
        if (heading.offsetTop <= scrollPosition) {
          currentSection = heading.id;
        }
      });
      
      // Remove active class from all links
      tocLinks.forEach(link => {
        link.classList.remove('active');
      });
      
      // Add active class to current link
      if (currentSection) {
        const activeLink = document.querySelector(`.toc a[href="#${currentSection}"]`);
        if (activeLink) {
          activeLink.classList.add('active');
        }
      }
    }
    
    window.addEventListener('scroll', highlightTocSection);
    highlightTocSection(); // Run once on load
  });
</script> 